<!DOCTYPE html>
<html>
<head>
  <title>Game Template Generator | MAUL</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta property="og:title" content="Game Template Generator - MAUL" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://moddedamong.us/templates.html" />
  <meta property="og:image" content="https://moddedamong.us/images/banner.png" />
  <meta property="og:description" content="Fill and export game templates with your variables." />
  <meta property="og:site_name" content="Modded Among Us Lobbies" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="https://moddedamong.us/templates.html" />
  <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300;700;900&family=VT323&family=Roboto+Mono:wght@400;700&family=Orbitron:wght@500;700&family=Press+Start+2P&family=Share+Tech+Mono&family=Rajdhani:wght@700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    html, body { height:100%; margin:0; padding:0; background:#000; font-family:'Roboto',sans-serif; color:#fff; overflow-x:hidden; }
    body { background:url('images/background.png') no-repeat center center fixed; background-size:cover; display:flex; flex-direction:column; align-items:center; padding-bottom:100px; }
    header { width:100%; text-align:center; padding:20px; background:rgba(0,0,0,0.7); position:relative; z-index:1000; }
    header h1 { margin:0; font-size:3em; color:#fff; }
    .dropdown { position:absolute; top:20px; left:30px; z-index:100; }
    .dropbtn { background:none; border:none; cursor:pointer; transition:transform .3s ease; padding:0; }
    .dropbtn:hover { transform:scale(1.1); }
    .hamburger { width:30px; height:22px; display:flex; flex-direction:column; justify-content:space-between; }
    .hamburger span { display:block; height:4px; background:#fff; border-radius:2px; }
    .dropdown-content { display:none; position:absolute; background:#2a2a2a; min-width:200px; box-shadow:0 8px 16px rgba(0,0,0,0.2); border-radius:6px; }
    .dropdown-content a { color:#fff; padding:12px 16px; text-decoration:none; display:block; transition:background .3s; }
    .dropdown-content a:hover { background:#3a3a3a; }
    .dropdown:hover .dropdown-content { display:block; }

    footer { position:fixed; bottom:0; left:0; width:100%; text-align:center; padding:15px; background:rgba(0,0,0,0.7); z-index:1000; }

    .container { max-width:1200px; width:92%; margin:40px auto; display:grid; gap:24px; }
    .panel { background:rgba(0,0,0,0.5); border:1px solid #1d0909; border-radius:8px; padding:20px; }
    .section-title { font-size:2em; text-align:center; margin:0 0 10px; }
    .section-subtitle { text-align:center; color:#cfcfcf; margin:0 0 20px; font-size:0.95em; }

    .grid { display:grid; gap:14px; }
    .row { display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
    .field { display:flex; align-items:center; gap:6px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15); padding:6px 8px; border-radius:8px; }
    .field input[type="text"], .field input[type="number"], .field textarea, .field select {
      background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.15); border-radius:6px; color:#def; padding:6px;
    }
    .field textarea { width:100%; min-height:120px; resize:vertical; }
    .grow { flex:1 1 280px; }
    .btn, .copy-btn, .copy-btn-sm {
      background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); color:#e7f0ff; font-size:.9em; padding:8px 12px; border-radius:6px; cursor:pointer; transition:background .2s, border-color .2s, transform .02s;
    }
    .btn:hover, .copy-btn:hover, .copy-btn-sm:hover { background:rgba(255,255,255,.12); border-color:rgba(255,255,255,.28); }
    .btn:active, .copy-btn:active, .copy-btn-sm:active { transform:scale(.98); }

    .twocol { display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    @media (max-width:900px){ .twocol { grid-template-columns:1fr; } }

    .codebox { background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:10px; font-family:'Roboto Mono', monospace; white-space:pre-wrap; word-break:break-word; }
    .icon-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(240px, 1fr)); gap:12px; }
    .icon-card { background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15); border-radius:8px; padding:10px; }
    .icon-card h3 { margin:0 0 8px; font-size:1.05em; }
    .icon-line { display:flex; flex-wrap:wrap; gap:8px; line-height:1.8; }
    .icon-line span { padding:2px 6px; border-radius:6px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); cursor:pointer; }
    .icon-line span:active { transform:scale(.97); }
    .fonts-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:12px; }
    .font-card { display:flex; justify-content:space-between; align-items:center; gap:10px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15); border-radius:8px; padding:10px 12px; }
    .font-name { font-family:'Share Tech Mono', monospace; }
    .copy-small { display:flex; gap:8px; }
    .copy-btn-sm { font-size:.8em; padding:6px 8px; }

    .note-box { background:rgba(255,255,255,.06); border:1px dashed rgba(255,255,255,.3); border-radius:8px; padding:10px; margin-top:10px; }
    .code-inline { font-family:'Roboto Mono', monospace; background:rgba(255,255,255,.08); padding:2px 6px; border-radius:6px; }

    .gg-row { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .color-chip { width:38px; height:30px; border:1px solid rgba(255,255,255,.2); background:transparent; }
    .preview-bar { height:44px; border-radius:8px; border:1px solid #000; margin:8px 0; }
    .pill { display:inline-flex; align-items:center; gap:6px; padding:4px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.18); background:rgba(255,255,255,.08); font-size:.85em; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>Game Template Generator</h1>
    <div class="dropdown">
      <button class="dropbtn" aria-label="Open navigation menu">
        <div class="hamburger"><span></span><span></span><span></span></div>
      </button>
      <div class="dropdown-content">
        <a href="index.html">Home</a>
        <a href="https://moddedamong.us/art.html">User Art</a>
        <a href="https://moddedamong.us/eventpics.html">Past Events</a>
        <a href="https://moddedamong.us/calendar.html">Event Calendar</a>
        <a href="https://moddedamong.us/mods.html">Featured Mods</a>
        <a href="https://moddedamong.us/ourstaff.html">Our Staff</a>
        <a href="https://moddedamong.us/presets.html">Mod Presets</a>
        <a href="https://moddedamong.us/icons.html">Icons and Fonts</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="panel" id="tmpl-gen">
      <h2 class="section-title"><u>Game Template Generator</u></h2>
      <p class="section-subtitle">Paste or upload templates, fill the {{placeholders}}, then copy/download.</p>

      <div class="grid">

        <div class="row">
          <div class="field grow">
            <label for="tmpl-search">Search</label>
            <input id="tmpl-search" type="text" placeholder="Filter templates by name..." />
          </div>
          <div class="field">
            <label for="tmpl-select">Template</label>
            <select id="tmpl-select"></select>
          </div>
          <button class="btn" id="btn-del-tmpl" title="Remove current template">Remove</button>
        </div>

        <div class="twocol">
          <div class="grid">
            <div class="field">
              <strong>Add Templates</strong>
            </div>
            <div class="row">
              <div class="field grow">
                <textarea id="tmpl-bulk" placeholder="Paste templates in this format:

welcome:
<size=180%>...</size>

rules:
<u><font=...>Rules</font></u>
..."></textarea>
              </div>
            </div>
            <div class="row">
              <input id="tmpl-files" type="file" accept=".txt" multiple />
              <button class="btn" id="btn-parse">Add from text</button>
              <button class="btn" id="btn-download-all" title="Export all templates as JSON">Download .json</button>
              <input id="btn-upload-json" type="file" accept="application/json" style="display:none" />
              <button class="btn" id="btn-upload-json-trigger">Import .json</button>
            </div>
          </div>

          <div class="grid">
            <div class="field">
              <strong>Detected Fields</strong>
            </div>
            <div id="fields-wrap" class="grid"></div>
          </div>
        </div>

        <div class="grid">
          <div class="field grow">
            <label for="tmpl-content"><strong>Template Content</strong></label>
            <textarea id="tmpl-content" placeholder="Template content will appear here..."></textarea>
          </div>
          <div class="row">
            <label class="pill"><input type="checkbox" id="chk-escape"> Escape HTML (&lt; &gt;)</label>
            <label class="pill"><input type="checkbox" id="chk-show-placeholders" checked> Keep unknown {{placeholders}}</label>
            <label class="pill"><input type="checkbox" id="chk-trim" checked> Trim leading/trailing blank lines</label>
          </div>
        </div>

        <div class="twocol">
          <div class="grid">
            <div class="row">
              <button class="btn" id="btn-apply">Apply fields ‚Üí Output</button>
              <button class="btn" id="btn-copy-output">Copy output</button>
              <button class="btn" id="btn-download-output">Download .txt</button>
            </div>
            <div class="codebox" id="tmpl-output"></div>
          </div>

          <div class="grid">
            <div class="row"><strong>Quick helpers</strong></div>
            <div class="row">
              <div class="field grow">
                <input id="helper-text" type="text" placeholder="Type text for gradient or font‚Ä¶" />
              </div>
              <button class="btn" id="btn-apply-gradient">Make gradient ‚Üí copy</button>
              <button class="btn" id="btn-wrap-font">Wrap with &lt;font&gt;</button>
            </div>
            <div class="row">
              <div class="field"><label>Font name</label><input id="helper-font" type="text" value="BROOK SDF" /></div>
              <div class="field"><label>Color (hex #)</label><input id="helper-color" type="text" value="#FF4D6D" /></div>
            </div>
            <div class="codebox" id="helper-preview"></div>
          </div>
        </div>

      </div>
    </section>

    <section class="panel">
      <h2 class="section-title"><u>Icons</u></h2>
      <p class="section-subtitle">All symbols below are known-working compatible icons. Click any to copy.</p>

      <div class="icon-grid" id="icon-grid">
      </div>
    </section>

    <section class="panel">
      <h2 class="section-title"><u>Working Fonts</u></h2>
      <p class="section-subtitle">Click to copy a ready-to-paste format.</p>

      <div class="fonts-grid" id="fonts-grid">
      </div>

      <div class="note-box">
        <strong>Font usage note</strong><br/>
        Custom format:
        <span class="code-inline">&lt;font="VCR SDF"&gt;Your text&lt;/font&gt;</span>
      </div>
    </section>

    <section class="panel" id="gradient-generator">
      <h2 class="section-title"><u>Gradient Generator</u></h2>
      <p class="section-subtitle">Build a per-character gradient string with 1‚Äì10 colors for your tags.</p>

      <div class="grid">
        <div class="row">
          <div class="field grow"><label>Text</label><input id="gg-text" type="text" value="‚ô°Besties‚ô°" maxlength="64"></div>
          <div class="field"><label>Stops</label><input id="gg-stops" type="number" min="1" max="10" value="3" style="width:70px"></div>
          <button class="btn" id="gg-add">Add</button>
          <button class="btn" id="gg-rem">Remove</button>
          <button class="btn" id="gg-rand">Randomize</button>
          <button class="btn" id="gg-copy">Copy result</button>
        </div>
        <div id="gg-colors" class="gg-row"></div>
        <div id="gg-preview" class="preview-bar" aria-label="Gradient preview"></div>
        <div class="codebox" id="gg-output"></div>
      </div>
    </section>

  </main>

  <footer>
    Made with ‚ô• by MAUL ‚Äî template tools for hosts & creators
  </footer>

  <script>
    function copyToClipboard(text){
      if(navigator.clipboard && window.isSecureContext){ return navigator.clipboard.writeText(text); }
      const ta=document.createElement('textarea'); ta.value=text; ta.style.position='fixed'; ta.style.left='-9999px';
      document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); } finally { document.body.removeChild(ta); }
      return Promise.resolve();
    }
    const clamp=(v,a,b)=>Math.min(b,Math.max(a,v));
    const normHex=(s,withHash=true)=>{ s=(s||'').trim(); if(!s) return withHash?'#FFFFFF':'FFFFFF';
      s=s.replace(/^#/,'').replace(/[^0-9a-fA-F]/g,'').slice(0,6);
      if(s.length===3) s=s.split('').map(c=>c+c).join('');
      if(s.length<6) s=(s+'FFFFFF').slice(0,6);
      return (withHash?'#':'')+s.toUpperCase();
    };
    const hexToRgb=h=>{h=normHex(h,true).slice(1); return {r:parseInt(h.slice(0,2),16), g:parseInt(h.slice(2,4),16), b:parseInt(h.slice(4,6),16)};};
    const rgbToHex=({r,g,b})=>'#'+[r,g,b].map(x=>clamp(x|0,0,255).toString(16).padStart(2,'0')).join('').toUpperCase();
    const lerp=(a,b,t)=>a+(b-a)*t;
    const lerpColor=(h1,h2,t)=>{ const c1=hexToRgb(h1), c2=hexToRgb(h2); return rgbToHex({ r: lerp(c1.r,c2.r,t), g: lerp(c1.g,c2.g,t), b: lerp(c1.b,c2.b,t) }); };

    const templates = new Map(); 
    const sel = document.getElementById('tmpl-select');
    const txtContent = document.getElementById('tmpl-content');
    const fieldsWrap = document.getElementById('fields-wrap');
    const outBox = document.getElementById('tmpl-output');

    function refreshSelect(filter=''){
      const current = sel.value;
      sel.innerHTML='';
      const names=[...templates.keys()].filter(n=>n.toLowerCase().includes(filter.toLowerCase())).sort((a,b)=>a.localeCompare(b));
      for(const n of names){
        const opt=document.createElement('option');
        opt.value=opt.textContent=n;
        sel.appendChild(opt);
      }
      if(names.length){
        sel.value = names.includes(current) ? current : names[0];
        loadTemplate(sel.value);
      } else {
        txtContent.value='';
        fieldsWrap.innerHTML='';
        outBox.textContent='';
      }
    }

    function loadTemplate(name){
      if(!templates.has(name)) return;
      const content = templates.get(name);
      txtContent.value = content;
      buildFieldsFromContent(content);
      renderOutput();
    }

    function parseBulkTemplates(text){
      const lines = (text||'').split(/\r?\n/);
      let currentName=null, currentLines=[];
      const flush=()=>{
        if(currentName){
          const content=currentLines.join('\n').replace(/^\n+|\n+$/g,'');
          templates.set(currentName, content);
        }
        currentName=null; currentLines=[];
      };
      for(const raw of lines){
        const line = raw;
        const m = line.match(/^([A-Za-z0-9 _.-]{1,64}):\s*$/);
        if(m){
          flush();
          currentName = m[1].trim();
        } else {
          currentLines.push(line);
        }
      }
      flush();
    }

    function detectPlaceholders(text){
      const set = new Set();
      const re = /{{\s*([\w.-]+)\s*}}/g;
      let m; while((m=re.exec(text))){ set.add(m[1]); }
      return [...set];
    }

    function buildFieldsFromContent(text){
      const keys = detectPlaceholders(text);
      fieldsWrap.innerHTML = keys.length ? '' : '<div class="field">No {{placeholders}} found.</div>';
      for(const k of keys){
        const row=document.createElement('div');
        row.className='row';
        row.innerHTML = `
          <div class="field"><label>${k}</label><input type="text" data-key="${k}" placeholder="${k} value"></div>
        `;
        fieldsWrap.appendChild(row);
      }
    }

    function getFieldValues(){
      const vals={};
      fieldsWrap.querySelectorAll('input[data-key]').forEach(inp=>{
        vals[inp.dataset.key]=inp.value;
      });
      return vals;
    }

    function applyTemplate(text, values, opts){
      const keepUnknown = !!opts.keepUnknown;
      const escape = !!opts.escape;
      let out = text;
      out = out.replace(/{{\s*([\w.-]+)\s*}}/g, (m, key)=>{
        if(Object.prototype.hasOwnProperty.call(values, key) && values[key] !== ''){
          return values[key];
        }
        return keepUnknown ? m : '';
      });

      if(opts.trim){
        out = out.replace(/^\s+|\s+$/g,'');
      }
      if(escape){
        out = out.replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;');
      }
      return out;
    }

    function renderOutput(){
      const vals = getFieldValues();
      const opts = {
        keepUnknown: document.getElementById('chk-show-placeholders').checked,
        escape: document.getElementById('chk-escape').checked,
        trim: document.getElementById('chk-trim').checked
      };
      outBox.textContent = applyTemplate(txtContent.value, vals, opts);
    }
    document.getElementById('btn-apply').addEventListener('click', renderOutput);
    fieldsWrap.addEventListener('input', renderOutput);
    txtContent.addEventListener('input', ()=>{
      buildFieldsFromContent(txtContent.value);
      renderOutput();
    });

    document.getElementById('btn-copy-output').addEventListener('click', ()=>{
      copyToClipboard(outBox.textContent).then(()=>{
        const b = document.getElementById('btn-copy-output');
        b.textContent='Copied!'; setTimeout(()=>b.textContent='Copy output', 1200);
      });
    });

    document.getElementById('btn-download-output').addEventListener('click', ()=>{
      const name = (sel.value || 'template').replace(/[^a-zA-Z0-9_\-]/g,'').slice(0,48) || 'template';
      const blob = new Blob([outBox.textContent], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = name + '.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });

    document.getElementById('btn-parse').addEventListener('click', ()=>{
      parseBulkTemplates(document.getElementById('tmpl-bulk').value);
      document.getElementById('tmpl-bulk').value='';
      refreshSelect(document.getElementById('tmpl-search').value);
    });

    document.getElementById('tmpl-files').addEventListener('change', (e)=>{
      const files = [...e.target.files];
      if(!files.length) return;
      let pending = files.length;
      files.forEach(f=>{
        const reader = new FileReader();
        reader.onload = () => {
          const base = (f.name||'').replace(/\.[^.]+$/,'');
          const text = String(reader.result||'');
          if(/^[A-Za-z0-9 _.-]{1,64}:\s*$/m.test(text)){
            parseBulkTemplates(text);
          } else {
            templates.set(base, text);
          }
          if(--pending===0){ refreshSelect(document.getElementById('tmpl-search').value); }
        };
        reader.readAsText(f);
      });
      e.target.value='';
    });

    document.getElementById('btn-download-all').addEventListener('click', ()=>{
      const data = Object.fromEntries(templates);
      const blob = new Blob([JSON.stringify(data, null, 2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'templates.json'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });
    document.getElementById('btn-upload-json-trigger').addEventListener('click', ()=>document.getElementById('btn-upload-json').click());
    document.getElementById('btn-upload-json').addEventListener('change', (e)=>{
      const f=e.target.files[0]; if(!f) return;
      const r=new FileReader();
      r.onload=()=>{
        try{
          const obj=JSON.parse(String(r.result||''));
          for(const [k,v] of Object.entries(obj)){ templates.set(String(k), String(v)); }
          refreshSelect(document.getElementById('tmpl-search').value);
        }catch(err){ alert('Invalid JSON'); }
      };
      r.readAsText(f);
      e.target.value='';
    });

    document.getElementById('btn-del-tmpl').addEventListener('click', ()=>{
      const name = sel.value;
      if(!name) return;
      if(confirm(`Delete template "${name}"?`)){
        templates.delete(name);
        refreshSelect(document.getElementById('tmpl-search').value);
      }
    });

    document.getElementById('tmpl-search').addEventListener('input', (e)=>{
      refreshSelect(e.target.value);
    });

    sel.addEventListener('change', ()=> loadTemplate(sel.value));

    const helperText = document.getElementById('helper-text');
    const helperFont = document.getElementById('helper-font');
    const helperColor = document.getElementById('helper-color');
    const helperPreview = document.getElementById('helper-preview');

    document.getElementById('btn-wrap-font').addEventListener('click', ()=>{
      const t = helperText.value || 'Sample';
      const f = helperFont.value || 'BROOK SDF';
      const c = normHex(helperColor.value,true);
      const wrapped = `<font="${f}"><color=${c}>${t}</color></font>`;
      helperPreview.textContent = wrapped;
      copyToClipboard(wrapped);
    });

    document.getElementById('btn-apply-gradient').addEventListener('click', ()=>{
      const t = helperText.value || '';
      const result = buildPerCharGradient(t, ggStops.slice());
      helperPreview.textContent = result;
      copyToClipboard(result);
    });

    const ICON_GROUPS = [
      ['FLOWERS','‚úø ‚ùÄ ‚ùñ'],
      ['SPORTS','‚öΩ ‚öæ'],
      ['CARD SUITS','‚ô† ‚ô£ ‚ô¶ ‚ô• ‚ô§ ‚ôß ‚ô¢ ‚ô°'],
      ['SYMBOLIC / STATUS','‚òØ ‚úö ‚ö† ‚Ä† ‚àû ‚úì'],
      ['COMMUNICATION','‚òé ‚òè'],
      ['WEATHER / ELEMENTS','‚òÄ ‚òÅ ‚òÇ ‚òÉ ‚òâ'],
      ['BOARD / MARKER','‚òñ ‚òó'],
      ['TECHNICAL / COMMAND','‚åÖ ‚åÜ ‚åá ‚åí ‚åò „Ä∂'],
      ['STARS / DECOR','‚òÖ ‚òÜ ‚ÅÇ ‚Åë ‚úΩ'],
      ['ARROWS','‚òù ‚òû ‚òü ‚òú ‚Üë ‚Üì ‚Üí ‚Üê ‚Üî ‚Üï ‚¨Ü ‚Üó ‚û° ‚Üò ‚¨á ‚Üô ‚¨Ö ‚Üñ ‚§¥ ‚§µ ‚á¶ ‚áß ‚á® ‚á© ‚áµ ‚áÑ ‚áÖ ‚áÜ ‚Üπ'],
      ['SHAPES','‚Ä¢ ‚óã ‚ó¶ ‚¶ø ‚ñ≤ ‚ñº ‚ô† ‚ô• ‚ô£ ‚ô¶ ‚ô§ ‚ô° ‚ôß ‚ô¢ ‚ñ† ‚ñ¢ ‚ñ£ ‚ñ§ ‚ñ• ‚ñ¶ ‚ñß ‚ñ® ‚ñ© ‚ñ™ ‚ñ´ ‚óè ‚óê ‚óë ‚óí ‚óì ‚óØ ‚óá ‚óà ‚ñ± ‚ñ∂ ‚óÄ'],
      ['SYMBOLS / OBJECTS','‚öô ‚öõ ‚öú ‚öì ‚ö° ‚öï ‚öí ‚öñ'],
      ['MUSICAL','‚ô© ‚ô™ ‚ô´ ‚ô¨ ‚ô≠ ‚ôÆ ‚ôØ ¬∞ √∏ ‚â†'],
      ['ELEMENTS / OBJECTS','‚òï ‚òò ‚òô ‚òÑ ‚òá ‚òà'],
      ['GENDER / FACES','‚ôÄ ‚ôÇ „Ä† „ÉÖ „ÉÑ „ã° ÏõÉ Ïú† √º √ú „Ç∑ „ÉÉ „ãõ ‚òÉ'],
      ['CIRCLES','‚óâ ‚óã ‚óç ‚óé ‚óè ‚óê ‚óë ‚óí ‚óì ‚äó ‚äô ‚óØ „Äá ‚ó¶ ‚àÖ ‚äï ‚äñ ‚äò ‚¶ø ¬∞ ¬∑ ÔΩ°'],
      ['SQUARES / BLOCKS','‚ñÄ ‚ñÅ ‚ñÇ ‚ñÉ ‚ñÑ ‚ñÖ ‚ñÜ ‚ñá ‚ñâ ‚ñä ‚ñã ‚ñà ‚ñå ‚ñê ‚ñç ‚ñé ‚ñè ‚ñë ‚ñí ‚ñì ‚ñî ‚ñ¢ ‚ñ£ ‚ñ§ ‚ñ• ‚ñ¶ ‚ñß ‚ñ® ‚ñ© ‚ñ™ ‚ñ´ ‚ñ± ‚ñ† ‚óà ‚óá ‚óÜ'],
      ['TRIANGLES','‚ñ≤ ‚ñº ‚óÄ ‚ó£ ‚ó• ‚ó§ ‚ó¢ ‚ñ∂ ‚ñ≥ ‚ñΩ ‚ñ∑ ‚àÜ ‚àá ‚äø'],
      ['BOX / CORNER DRAWING','‚îê ‚îî ‚îò ‚îå ‚îú ‚î§ ‚î¨ ‚î¥ ‚îº ‚ïî ‚ïó ‚ïö ‚ïù ‚ï† ‚ï£ ‚ï¶ ‚ï© ‚ï¨ ‚ï≠ ‚ïÆ ‚ïØ ‚ï∞ ‚ï≥ ‚ï≤ ‚ï±'],
      ['DANGER / STATUS','‚ò† ‚ò¢ ‚ò£ ‚ö∞ ‚ö±'],
      ['DECORATIVE / MISC','‚ô® ‚òÆ ‚ò• ‚ò¶ ‚úû ‚úü ‚ú† ‚ú°'],
      ['SYMBOLS / BADGES','‚Ñ¢ „Ä∞ üÜó üÜï üÜô üÜí üÜì üÜñ üÖø ‚ìÇ üÜë üÜò üÜö üÖ∞ üÖ± üÜé üÖæ ‚ôª üÜî']
    ];
    const iconGrid = document.getElementById('icon-grid');
    function buildIcons(){
      iconGrid.innerHTML='';
      for(const [title, line] of ICON_GROUPS){
        const card=document.createElement('div'); card.className='icon-card';
        const h3=document.createElement('h3'); h3.textContent=title; card.appendChild(h3);
        const row=document.createElement('div'); row.className='icon-line';
        for(const ch of line.split(/\s+/).filter(Boolean)){
          const span=document.createElement('span'); span.textContent=ch;
          span.title='Click to copy';
          span.addEventListener('click', ()=> copyToClipboard(ch));
          row.appendChild(span);
        }
        card.appendChild(row); iconGrid.appendChild(card);
      }
    }

    const FONT_NAMES = [
      'VCR SDF','Barlow-Black SDF','Barlow-BoldItalic SDF','Barlow-Light SDF',
      'BROOK SDF','CONSOLA SDF','DIGITAL-7 SDF','DIN_Pro_Bold_700 SDF',
      'LiberationSans SDF','NotoSansJP-Regular SDF','OCRAEXT SDF'
    ];
    const fontsGrid = document.getElementById('fonts-grid');
    function buildFonts(){
      fontsGrid.innerHTML='';
      for(const f of FONT_NAMES){
        const card=document.createElement('div'); card.className='font-card'; card.dataset.font=f;
        const name=document.createElement('div'); name.className='font-name'; name.textContent=f;
        const box=document.createElement('div'); box.className='copy-small';
        const btn=document.createElement('button'); btn.className='copy-btn-sm'; btn.textContent='Copy format';
        btn.addEventListener('click', ()=>{
          const str = `<font="${f}">Your text</font>`;
          copyToClipboard(str);
        });
        box.appendChild(btn);
        card.appendChild(name); card.appendChild(box); fontsGrid.appendChild(card);
      }
    }

    const ggText = document.getElementById('gg-text');
    const ggStopsInput = document.getElementById('gg-stops');
    const ggColors = document.getElementById('gg-colors');
    const ggPreview = document.getElementById('gg-preview');
    const ggOutput = document.getElementById('gg-output');
    let ggStops = ['#B625F1','#2970F8','#00CFFF'];

    function rebuildColorInputs(){
      ggColors.innerHTML='';
      ggStops.forEach((hex, idx)=>{
        const wrap=document.createElement('div'); wrap.className='row';
        const t=document.createElement('input'); t.type='text'; t.value=normHex(hex,true); t.style.width='100px';
        const c=document.createElement('input'); c.type='color'; c.className='color-chip'; c.value=normHex(hex,true);
        const up=document.createElement('button'); up.className='btn'; up.textContent='‚ñ≤';
        const dn=document.createElement('button'); dn.className='btn'; dn.textContent='‚ñº';
        const rm=document.createElement('button'); rm.className='btn'; rm.textContent='‚úï';
        up.addEventListener('click',()=>{ if(idx>0){ [ggStops[idx-1],ggStops[idx]]=[ggStops[idx],ggStops[idx-1]]; rebuildColorInputs(); renderGG(); }});
        dn.addEventListener('click',()=>{ if(idx<ggStops.length-1){ [ggStops[idx+1],ggStops[idx]]=[ggStops[idx],ggStops[idx+1]]; rebuildColorInputs(); renderGG(); }});
        rm.addEventListener('click',()=>{ if(ggStops.length>1){ ggStops.splice(idx,1); ggStopsInput.value=ggStops.length; rebuildColorInputs(); renderGG(); }});
        t.addEventListener('input',()=>{ const h=normHex(t.value,true); t.value=h; c.value=h; ggStops[idx]=h; renderGG(); });
        c.addEventListener('input',()=>{ const h=normHex(c.value,true); t.value=h; ggStops[idx]=h; renderGG(); });
        wrap.appendChild(t); wrap.appendChild(c); wrap.appendChild(up); wrap.appendChild(dn); wrap.appendChild(rm);
        ggColors.appendChild(wrap);
      });
    }

    function buildPerCharGradient(text, colors){
      const chars=[...String(text||'')];
      if(chars.length===0) return '';
      if(colors.length===0) colors=['#FFFFFF'];
      const out=[];
      if(chars.length===1){
        const hex=normHex(colors[0],true);
        out.push(`<color=${hex}>${chars[0]}</color>`);
      } else {
        for(let i=0;i<chars.length;i++){
          const t = i/(chars.length-1);
          const seg = (colors.length-1)*t;
          const i0 = Math.floor(seg), i1 = Math.min(colors.length-1,i0+1);
          const localT = seg - i0;
          const col = lerpColor(colors[i0], colors[i1], localT);
          out.push(`<color=${normHex(col,true)}>${chars[i]}</color>`);
        }
      }
      return out.join('');
    }

    function renderGG(){
      const css = `linear-gradient(90deg, ${ggStops.map((c,i)=>`${normHex(c,true)} ${(i*100/(Math.max(ggStops.length-1,1)))}%`).join(', ')})`;
      ggPreview.style.background = css;
      const s = buildPerCharGradient(ggText.value, ggStops);
      ggOutput.textContent = s;
    }

    document.getElementById('gg-add').addEventListener('click',()=>{
      const n = clamp(parseInt(ggStopsInput.value||'1',10),1,10);
      if(ggStops.length < n){ ggStops.push('#'+Math.floor(Math.random()*0xFFFFFF).toString(16).padStart(6,'0')); ggStopsInput.value=ggStops.length; rebuildColorInputs(); renderGG(); }
    });
    document.getElementById('gg-rem').addEventListener('click',()=>{
      if(ggStops.length>1){ ggStops.pop(); ggStopsInput.value=ggStops.length; rebuildColorInputs(); renderGG(); }
    });
    document.getElementById('gg-rand').addEventListener('click',()=>{
      ggStops = ggStops.map(()=> '#'+Math.floor(Math.random()*0xFFFFFF).toString(16).padStart(6,'0'));
      rebuildColorInputs(); renderGG();
    });
    ggText.addEventListener('input', renderGG);
    ggStopsInput.addEventListener('change', ()=>{
      let n = clamp(parseInt(ggStopsInput.value||'1',10),1,10);
      while(ggStops.length<n) ggStops.push('#'+Math.floor(Math.random()*0xFFFFFF).toString(16).padStart(6,'0'));
      while(ggStops.length>n) ggStops.pop();
      rebuildColorInputs(); renderGG();
    });
    document.getElementById('gg-copy').addEventListener('click', ()=>{
      copyToClipboard(ggOutput.textContent);
    });

    const DEMO_TEMPLATES = `
welcome:
<size=180%><align=center><b><font="BROOK SDF"><color=#ff4d6d>‚ô°</color> <color=#ff758f>Endless Host Roles</color><color=#ff4d6d> ‚ô°</color></font></b></align></size>

<size=80%><align=center>This lobby is hosted by <color=#ff4d6d>{{HostName}}</color> and this is not the ordinary Among Us experience.</align></size>

<color=#ff8fa3><size=120%><font="BROOK SDF"><color=#c9184a><align=center><color=#a4133c>‚ùñ</color>{{ModVersion}}</color><color=#a4133c>‚ùñ</color></align></font></size></color>

<size=110%><u><align=center><font="BROOK SDF"><color=#ff4d6d>‚úΩ</color><color=#ff8fa3>Commands</color><color=#ff4d6d>‚úΩ</color></font></align></u></size>
<font="BROOK SDF"><b><color=#590d22>/l</color></b></font> - View players rank
<font="BROOK SDF"><b><color=#800f2f>/win</color></b></font> - View winning team names
<font="BROOK SDF"><b><color=#a4133c>/t discord</color></b></font> - Get the link to join my discord
<font="BROOK SDF"><b><color=#c9184a>/t customtag</color></b></font> - How to get a custom name tag
<font="BROOK SDF"><b><color=#ff8fa3>/t templates</color></b></font> - See a large majority of templates
<size=95%><u>Links</u></size>
<color=#ffb3c1>-</color> 
<color=#ff8fa3><b>Discord</b></color> <color=#ffb3c1>-</color> <color=#ffccd5>https://discord.gg/maul</color>

rules:
<u><font="BROOK SDF"><color=#590d22>Rules:</color></font></u>
<font="CONSOLA SDF"><color=#800f2f>‚ô•</color> 1. No being rude to other players
<color=#a4133c>‚ô•</color> 2. No teaming, and no targeting allowed
<color=#c9184a>‚ô•</color> 3. Leave drama in the game
<color=#ff4d6d>‚ô•</color> 4. No vent camping
<color=#ff758f>‚ô•</color> 5. No AFK killing or touching till round 3 ‚Äì This excludes Seeker
<color=#ff8fa3>‚ô•</color> 6. Don‚Äôt be sus
<color=#ffb3c1>‚ô•</color> 7. No controversial topics ‚Äì anything political, racial, or sexual in nature will result in a ban
</font>

OnMeeting:
<size=130%><align=center><b><font="BROOK SDF"><color=#ff4d6d>‚ô°</color> <color=#ff758f>Command Usage</color> <color=#ff4d6d>‚ô°</color></font></b></align></size>
<size=75%><align=center>Use these during meetings for quick info or special actions.</align></size>
<size=100%>
<font="BROOK SDF"><b><color=#590d22>/m</color></b></font> - Get <b>your</b> role details
<font="BROOK SDF"><b><color=#800f2f>/r</color></b></font> - View role list
<font="BROOK SDF"><b><color=#a4133c>/r <color=#ff8f4d>[role]</color></color></b></font> - Get details for a role
<font="BROOK SDF"><b><color=#c9184a>/death</color></b></font> - Get your death info
<font="BROOK SDF"><b><color=#ff4d6d>/bt <color=#5a7aff>[num]</color> <color=#ff8f4d>[role]</color></color></b></font> - Guess a player's role
<font="BROOK SDF"><b><color=#ff758f>/tl <color=#5a7aff>[num]</color></color></b></font> - Trial as <color=#ffd966>Judge</color> or <color=#ff4d4d>Councillor</color>
<font="BROOK SDF"><b><color=#ff8fa3>/rv <color=#5a7aff>[num]</color></color></b></font> - Revenge a player as <color=#ff4d4d>Nemesis</color>
<font="BROOK SDF"><b><color=#ffb3c1>/retribute <color=#5a7aff>[num]</color></color></b></font> - Kill a player as <color=#4dd87a>Retributionist</color>
<font="BROOK SDF"><b><color=#ffc4d5>/cp <color=#5a7aff>[num1]</color> <color=#ff6a76>[num2]</color></color></b></font> - Compare alignments as <color=#5ac8ff>Inspector</color>
</size>
`.trim();

    /* seed */
    parseBulkTemplates(DEMO_TEMPLATES);
    buildIcons();
    buildFonts();
    refreshSelect('');
    rebuildColorInputs();
    renderGG();

  </script>
</body>
</html>
