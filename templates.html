<!DOCTYPE html>
<html>
<head>
  <title>MAUL | Live Tag Editor</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta property="og:title" content="Live Tag Editor - MAUL" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://moddedamong.us/templates.html" />
  <meta property="og:image" content="https://moddedamong.us/images/banner.png" />
  <meta property="og:description" content="Type, color, and export Among Us tags with smooth gradients in real time." />
  <meta property="og:site_name" content="Modded Among Us Lobbies" />
  <meta property="og:locale" content="en_US" />
  <link rel="canonical" href="https://moddedamong.us/templates.html" />
  <link rel="shortcut icon" type="image/png" href="images/favicon.png" />
  <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@300;700;900&family=VT323&family=Roboto+Mono:wght@400;700&family=Orbitron:wght@500;700&family=Press+Start+2P&family=Share+Tech+Mono&family=Rajdhani:wght@700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet"/>
  <style>
    html, body { height:100%; margin:0; padding:0; background:#000; font-family:'Roboto',sans-serif; color:#fff; overflow-x:hidden; }
    body {
      background:
        linear-gradient(rgba(0,0,0,.80), rgba(0,0,0,.80)),
        url('images/background.png') no-repeat center center fixed;
      background-size:cover;
      display:flex; flex-direction:column; align-items:center; padding-bottom:100px;
    }
    header { width:100%; text-align:center; padding:20px; background:rgba(0,0,0,0.9); position:relative; z-index:1000; }
    header h1 { margin:0; font-size:2rem; color:#fff; letter-spacing:.5px; }
    .dropdown { position:absolute; top:16px; left:20px; z-index:1001; }
    .dropbtn { background:none; border:none; cursor:pointer; transition:transform .2s ease; padding:0; }
    .dropbtn:hover { transform:scale(1.06); }
    .hamburger { width:30px; height:22px; display:flex; flex-direction:column; justify-content:space-between; }
    .hamburger span { display:block; height:4px; background:#fff; border-radius:2px; }
    .dropdown-content {
      display:none; position:absolute; top:30px; left:0;
      background:#1e1e1e; min-width:220px; box-shadow:0 8px 16px rgba(0,0,0,0.45);
      border:1px solid #343434; border-radius:8px; overflow:hidden;
    }
    .dropdown-content a {
      color:#fff; padding:12px 16px; text-decoration:none; display:block; transition:background .2s;
      border-bottom:1px solid #2a2a2a;
    }
    .dropdown-content a:last-child { border-bottom:0; }
    .dropdown-content a:hover { background:#2a2a2a; }
    .dropdown:hover .dropdown-content { display:block; }

    footer { position:fixed; bottom:0; left:0; width:100%; text-align:center; padding:12px; background:rgba(0,0,0,0.9); z-index:2; font-size:.9rem; }

    .container { max-width:1100px; width:92%; margin:36px auto; display:grid; gap:20px; }
    .panel { background:rgba(0,0,0,0.65); border:1px solid rgba(255,255,255,.1); border-radius:10px; padding:18px; }
    .section-title { font-size:1.8rem; text-align:center; margin:0 0 6px; }
    .section-subtitle { text-align:center; color:#e6e6e6; margin:0 0 16px; font-size:.98rem; }

    .grid { display:grid; gap:14px; }
    .row { display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
    .field { display:flex; align-items:center; gap:8px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.16); padding:6px 10px; border-radius:8px; }
    .field input[type="text"], .field input[type="number"], .field textarea, .field select {
      background:rgba(0,0,0,.5); border:1px solid rgba(255,255,255,.24); border-radius:6px; color:#def; padding:8px;
    }
    .field textarea { width:100%; min-height:130px; resize:vertical; }

    .btn {
      background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.28);
      color:#e7f0ff; font-size:.92rem; padding:8px 12px; border-radius:6px; cursor:pointer;
      transition:background .15s, border-color .15s, transform .02s;
    }
    .btn:hover { background:rgba(255,255,255,.18); border-color:rgba(255,255,255,.38); }
    .btn:active { transform:scale(.98); }

    .codebox {
      background:rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.25);
      border-radius:10px; padding:14px;
      font-family:'Roboto Mono', monospace; white-space:pre-wrap; word-break:break-word;
    }

    .twocol { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
    @media (max-width:900px){ .twocol { grid-template-columns:1fr; } }

    #lte-preview { min-height:320px; font-size:1.35rem; line-height:1.6; padding:16px 18px; }
    #lte-output  { min-height:170px; font-size:1rem; }
    .gg-row { display:flex; flex-wrap:wrap; gap:8px; align-items:center; }
    .color-chip { width:40px; height:32px; border:1px solid rgba(255,255,255,.22); background:transparent; }
    .preview-bar { height:44px; border-radius:8px; border:1px solid #000; margin:6px 0; }

    .icon-launch { margin-left:auto; }
    .icon-palette {
      position:fixed; right:20px; bottom:80px; width:300px; max-height:360px; overflow:auto;
      background:#1b1b1b; border:1px solid #444; border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,.5);
      display:none; z-index:30;
    }
    .icon-palette header { background:#111; border-bottom:1px solid #333; padding:8px 10px; font-weight:700; font-size:.95rem; }
    .icon-grid { display:grid; grid-template-columns:repeat(6, 1fr); gap:6px; padding:10px; }
    .icon-cell {
      padding:8px; text-align:center; border:1px solid #333; background:#222; border-radius:6px; cursor:pointer;
      user-select:none; transition:transform .02s, background .15s, border-color .15s;
      font-size:1.1rem;
    }
    .icon-cell:hover { background:#2c2c2c; border-color:#555; }
    .icon-cell:active { transform:scale(.96); }
  </style>
</head>
<body>
  <header>
    <h1>MAUL Live Tag Editor</h1>
    <div class="dropdown">
      <button class="dropbtn" aria-label="Open navigation menu">
        <div class="hamburger"><span></span><span></span><span></span></div>
      </button>
      <div class="dropdown-content">
        <a href="index.html">Home</a>
        <a href="https://moddedamong.us/art.html">User Art</a>
        <a href="https://moddedamong.us/eventpics.html">Past Events</a>
        <a href="https://moddedamong.us/calendar.html">Event Calendar</a>
        <a href="https://moddedamong.us/mods.html">Featured Mods</a>
        <a href="https://moddedamong.us/ourstaff.html">Our Staff</a>
        <a href="https://moddedamong.us/presets.html">Mod Presets</a>
        <a href="https://moddedamong.us/icons.html">Icons and Fonts</a>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="panel" id="live-template-editor">
      <h2 class="section-title"><u>Live Template Editor</u></h2>
      <p class="section-subtitle">Type your text, select a range, then apply a <b>smooth gradient</b> or a <b>solid color</b>. Insert icons from the palette. Preview updates in real time.</p>

      <div class="grid">
        <div class="row">
          <div class="field">
            <label>Font</label>
            <select id="lte-font">
              <option>BROOK SDF</option><option>VCR SDF</option><option>Barlow-Black SDF</option>
              <option>Barlow-BoldItalic SDF</option><option>Barlow-Light SDF</option><option>CONSOLA SDF</option>
              <option>DIGITAL-7 SDF</option><option>DIN_Pro_Bold_700 SDF</option><option>LiberationSans SDF</option>
              <option>NotoSansJP-Regular SDF</option><option>OCRAEXT SDF</option>
            </select>
          </div>

          <div class="field">
            <label>Solid</label>
            <input id="lte-solid" type="color" value="#FF4D6D">
            <button class="btn" id="lte-apply-solid">Apply to selection</button>
          </div>

          <div class="field">
            <label>Stops</label>
            <div class="gg-row" id="lte-stops"></div>
            <button class="btn" id="lte-add-stop" title="Add stop">Add</button>
            <button class="btn" id="lte-shuffle-stops" title="Randomize stops">Randomize</button>
          </div>

          <button class="btn" id="lte-apply-gradient">Apply gradient to selection</button>
          <button class="btn icon-launch" id="btn-icons">Iconsâ€¦</button>
        </div>

        <div id="lte-grad-preview" class="preview-bar" aria-label="Gradient preview"></div>

        <div class="twocol">
          <div class="grid">
            <div class="field">
              <label><strong>Editor (markup auto-generated)</strong></label>
            </div>
            <textarea id="lte-editor" placeholder="Type hereâ€¦"></textarea>

            <div class="row">
              <button class="btn" id="lte-copy">Copy markup</button>
              <button class="btn" id="lte-download">Download .txt</button>
              <span id="lte-status" aria-live="polite"></span>
            </div>
            <div class="codebox" id="lte-output"></div>
          </div>

          <div class="grid">
            <div class="field"><strong>Live Preview (renders fonts + colors)</strong></div>
            <div id="lte-preview" class="codebox"></div>
            <div class="field"><small>Note: SDF fonts are mapped to similar web fonts for browser preview only.</small></div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer>
    Made with â™¥ by MAUL â€” template tools for hosts & creators
  </footer>

  <div class="icon-palette" id="icon-palette" role="dialog" aria-modal="true">
    <header>Icon Picker</header>
    <div class="icon-grid" id="icon-grid"></div>
  </div>

  <script>
    function copyToClipboard(text){
      if(navigator.clipboard && window.isSecureContext){ return navigator.clipboard.writeText(text); }
      const ta=document.createElement('textarea'); ta.value=text; ta.style.position='fixed'; ta.style.left='-9999px';
      document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); } finally { document.body.removeChild(ta); }
      return Promise.resolve();
    }
    const clamp=(v,a,b)=>Math.min(b,Math.max(a,v));
    const normHex=(s,withHash=true)=>{ s=(s||'').trim(); if(!s) return withHash?'#FFFFFF':'FFFFFF';
      s=s.replace(/^#/,'').replace(/[^0-9a-fA-F]/g,'').slice(0,6);
      if(s.length===3) s=s.split('').map(c=>c+c).join('');
      if(s.length<6) s=(s+'FFFFFF').slice(0,6);
      return (withHash?'#':'')+s.toUpperCase();
    };
    const hexToRgb=h=>{h=normHex(h,true).slice(1); return {r:parseInt(h.slice(0,2),16), g:parseInt(h.slice(2,4),16), b:parseInt(h.slice(4,6),16)};};
    const rgbToHex=({r,g,b})=>'#'+[r,g,b].map(x=>clamp(x|0,0,255).toString(16).padStart(2,'0')).join('').toUpperCase();
    const lerp=(a,b,t)=>a+(b-a)*t;
    const lerpColor=(h1,h2,t)=>{ const c1=hexToRgb(h1), c2=hexToRgb(h2); return rgbToHex({ r: lerp(c1.r,c2.r,t), g: lerp(c1.g,c2.g,t), b: lerp(c1.b,c2.b,t) }); };
    const ed = document.getElementById('lte-editor');
    const out = document.getElementById('lte-output');
    const prev = document.getElementById('lte-preview');
    const fontSel = document.getElementById('lte-font');
    const solidPicker = document.getElementById('lte-solid');
    const statusEl = document.getElementById('lte-status');
    const btnCopy  = document.getElementById('lte-copy');
    const btnDL    = document.getElementById('lte-download');
    const btnSolid = document.getElementById('lte-apply-solid');
    const btnGrad  = document.getElementById('lte-apply-gradient');

    const stopsWrap = document.getElementById('lte-stops');
    const btnAddStop = document.getElementById('lte-add-stop');
    const btnShuffle = document.getElementById('lte-shuffle-stops');
    const gradPrev   = document.getElementById('lte-grad-preview');

    const FONT_MAP = {
      'BROOK SDF': `'Barlow','Rajdhani',sans-serif`,
      'VCR SDF': `'VT323',monospace`,
      'Barlow-Black SDF': `'Barlow',sans-serif`,
      'Barlow-BoldItalic SDF': `'Barlow',sans-serif`,
      'Barlow-Light SDF': `'Barlow',sans-serif`,
      'CONSOLA SDF': `'Share Tech Mono','Roboto Mono',monospace`,
      'DIGITAL-7 SDF': `'Orbitron',monospace`,
      'DIN_Pro_Bold_700 SDF': `'Rajdhani',sans-serif`,
      'LiberationSans SDF': `'Barlow',sans-serif`,
      'NotoSansJP-Regular SDF': `'Noto Sans JP',sans-serif`,
      'OCRAEXT SDF': `'Press Start 2P','VT323',monospace`
    };

    let STOPS = ['#B625F1','#2970F8','#00CFFF','#31D0AA']; 
    let markup = '';

    const toHTML = (s)=>{
      let html = s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
      html = html.replace(/&lt;font="([^"]+)"&gt;/g, (_,name)=>`<span style="font-family:${FONT_MAP[name]||'inherit'}">`)
                 .replace(/&lt;\/font&gt;/g, '</span>');
      html = html.replace(/&lt;color=#[0-9A-Fa-f]{6}&gt;/g, m=>{
                const hex = (m.match(/#[0-9A-Fa-f]{6}/)||['#FFFFFF'])[0];
                return `<span style="color:${hex}">`;
              }).replace(/&lt;\/color&gt;/g, '</span>');
      return html;
    };

    const buildIndexMap=(mark)=>{
      const map=[]; let iPlain=0, i=0;
      while(i<mark.length){
        if(mark.startsWith('<color=', i)){ const k=mark.indexOf('>',i); if(k===-1) break; i=k+1; continue; }
        if(mark.startsWith('</color>', i)){ i+=8; continue; }
        if(mark.startsWith('<font="', i)){ const k=mark.indexOf('>',i); if(k===-1) break; i=k+1; continue; }
        if(mark.startsWith('</font>', i)){ i+=7; continue; }
        map[iPlain++] = i; i++;
      }
      map[iPlain] = i; return map;
    };
    const replacePlainRangeWith=(mark,i0,i1,repl)=>{
      const map = buildIndexMap(mark);
      const a = map[i0] ?? mark.length;
      const b = map[i1] ?? mark.length;
      return mark.slice(0,a) + repl + mark.slice(b);
    };
    function buildSmoothGradient(text){
      const chars=[...String(text||'')]; if(chars.length===0) return '';
      const out=[];
      for(let i=0;i<chars.length;i++){
        const t = chars.length===1 ? 0 : i/(chars.length-1);
        const seg = (STOPS.length-1)*t;
        const i0 = Math.floor(seg), i1 = Math.min(STOPS.length-1, i0+1);
        const localT = seg - i0;
        const hex = lerpColor(STOPS[i0], STOPS[i1], localT);
        out.push(`<color=${normHex(hex,true)}>${chars[i]}</color>`);
      }
      return out.join('');
    }

    function renderStops(){
      stopsWrap.innerHTML='';
      STOPS.forEach((hex,idx)=>{
        const row=document.createElement('div'); row.className='row';
        const t=document.createElement('input'); t.type='text'; t.value=normHex(hex,true); t.style.width='100px';
        const c=document.createElement('input'); c.type='color'; c.className='color-chip'; c.value=normHex(hex,true);
        const up=document.createElement('button'); up.className='btn'; up.textContent='â–²';
        const dn=document.createElement('button'); dn.className='btn'; dn.textContent='â–¼';
        const rm=document.createElement('button'); rm.className='btn'; rm.textContent='âœ•';
        t.addEventListener('input',()=>{ const h=normHex(t.value,true); t.value=h; c.value=h; STOPS[idx]=h; renderGradPreview(); renderAll(); });
        c.addEventListener('input',()=>{ const h=normHex(c.value,true); t.value=h; STOPS[idx]=h; renderGradPreview(); renderAll(); });
        up.addEventListener('click',()=>{ if(idx>0){ [STOPS[idx-1],STOPS[idx]]=[STOPS[idx],STOPS[idx-1]]; renderStops(); renderGradPreview(); renderAll(); }});
        dn.addEventListener('click',()=>{ if(idx<STOPS.length-1){ [STOPS[idx+1],STOPS[idx]]=[STOPS[idx],STOPS[idx+1]]; renderStops(); renderGradPreview(); renderAll(); }});
        rm.addEventListener('click',()=>{ if(STOPS.length>1){ STOPS.splice(idx,1); renderStops(); renderGradPreview(); renderAll(); }});
        row.append(t,c,up,dn,rm); stopsWrap.appendChild(row);
      });
    }
    function renderGradPreview(){
      gradPrev.style.background = `linear-gradient(90deg, ${STOPS.map((c,i)=>`${normHex(c,true)} ${(i*100/(Math.max(STOPS.length-1,1)))}%`).join(', ')})`;
    }

    function ensureFontWrap(){
      const f=fontSel.value;
      if(!markup) markup = `<font="${f}"></font>`;
      if(!markup.startsWith(`<font="${f}">`)){
        markup = markup.replace(/^<font="[^"]+">/,'');
        markup = `<font="${f}">` + markup;
      }
      if(!markup.endsWith(`</font>`)) markup += `</font>`;
    }
    function renderAll(){
      ensureFontWrap();
      out.textContent = markup;
      prev.innerHTML = toHTML(markup);
    }

    function syncSolid(){
      const solid = normHex(solidPicker.value,true);
      const f = fontSel.value;
      const text = ed.value.replace(/\r?\n/g, '\\n'); 
      markup = `<font="${f}"><color=${solid}>${text}</color></font>`;
      renderAll();
    }

    function applySolidToSelection(){
      const s=ed.selectionStart|0, e=ed.selectionEnd|0; if(e<=s) return;
      const hex = normHex(solidPicker.value,true);
      const slice = ed.value.slice(s,e).replace(/\r?\n/g,'\\n');
      markup = replacePlainRangeWith(markup, s, e, `<color=${hex}>${slice}</color>`);
      renderAll();
      statusEl.textContent = 'Solid color applied to selection.';
    }
    function applyGradientToSelection(){
      const s=ed.selectionStart|0, e=ed.selectionEnd|0; if(e<=s) return;
      const slice = ed.value.slice(s,e).replace(/\r?\n/g,'\\n');
      const colored = buildSmoothGradient(slice);
      markup = replacePlainRangeWith(markup, s, e, colored);
      renderAll();
      statusEl.textContent = 'Smooth gradient applied to selection.';
    }

    fontSel.addEventListener('change', renderAll);
    solidPicker.addEventListener('input', syncSolid);
    ed.addEventListener('input', syncSolid);
    ed.addEventListener('keyup', syncSolid);
    document.getElementById('lte-apply-solid').addEventListener('click', applySolidToSelection);
    document.getElementById('lte-apply-gradient').addEventListener('click', applyGradientToSelection);

    document.getElementById('lte-add-stop').addEventListener('click', ()=>{ STOPS.push('#'+Math.floor(Math.random()*0xFFFFFF).toString(16).padStart(6,'0')); renderStops(); renderGradPreview(); });
    document.getElementById('lte-shuffle-stops').addEventListener('click', ()=>{ STOPS = STOPS.map(()=> '#'+Math.floor(Math.random()*0xFFFFFF).toString(16).padStart(6,'0')); renderStops(); renderGradPreview(); });

    document.getElementById('lte-copy').addEventListener('click', ()=> copyToClipboard(markup));
    document.getElementById('lte-download').addEventListener('click', ()=>{
      const blob = new Blob([markup], {type:'text/plain;charset=utf-8'});
      const url = URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download='template.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    });
    renderStops(); renderGradPreview();
    ed.value = 'â™¡Bestiesâ™¡';
    syncSolid();

    const ICONS = [
      'âœ¿','â€','â–','âš½','âš¾','â™ ','â™£','â™¦','â™¥','â™¤','â™§','â™¢','â™¡','â˜¯','âœš','âš ','â€ ','âˆž','âœ“',
      'â˜Ž','â˜','â˜€','â˜','â˜‚','â˜ƒ','â˜‰','â˜…','â˜†','â‚','âœ½','â˜','â˜ž','â˜Ÿ','â˜œ','â†‘','â†“','â†’','â†','â†”','â†•',
      'âŒ˜','âŒ…','âŒ†','âŒ‡','ã€¶','âš™','âš›','âšœ','âš“','âš¡','âš•','âš’','âš–','â™©','â™ª','â™«','â™¬','â™­','â™®','â™¯',
      'â˜•','â˜˜','â˜„','â˜‡','â˜ˆ','ã€ ','ãƒ…','ãƒ„','ã‹¡','ì›ƒ','ìœ ','ã‚·','ãƒƒ','ã‹›','â—‰','â—‹','â—Ž','â—','âŠ—','âŠ™',
      'â—¯','â—‡','â—ˆ','â—','â—','â—‘','â—’','â—“','â—¦','âˆ…','âŠ•','âŠ–','âŠ˜','â¦¿','â–€','â–','â–‚','â–ƒ','â–„','â–…','â–†','â–‡',
      'â–‰','â–‹','â–ˆ','â–‘','â–’','â–“','â–¢','â–£','â–¤','â–¥','â–¦','â–§','â–¨','â–©','â–ª','â–«','â—†','â—£','â—¥','â—¤','â—¢',
      'â˜ ','â˜¢','â˜£','âš°','âš±','â™¨','â˜®','âœ ','âœ¡','â„¢','ã€°','â“‚','â™»','ðŸ†˜','ðŸ…°','ðŸ…±','ðŸ…¾','ðŸ†š'
    ];

    const btnIcons = document.getElementById('btn-icons');
    const palette  = document.getElementById('icon-palette');
    const iconGrid = document.getElementById('icon-grid');

    function buildIcons(){
      iconGrid.innerHTML='';
      ICONS.forEach(ch=>{
        const cell = document.createElement('div');
        cell.className='icon-cell';
        cell.textContent = ch;
        cell.title = 'Insert "'+ch+'"';
        cell.addEventListener('click', ()=>{
          insertAtCaret(ed, ch);
          palette.style.display='none';
          ed.focus();
          syncSolid();
        });
        iconGrid.appendChild(cell);
      });
    }
    function insertAtCaret(textarea, txt){
      const s = textarea.selectionStart|0, e = textarea.selectionEnd|0;
      const val = textarea.value;
      textarea.value = val.slice(0,s) + txt + val.slice(e);
      const pos = s + txt.length;
      textarea.selectionStart = textarea.selectionEnd = pos;
    }
    btnIcons.addEventListener('click', ()=>{
      palette.style.display = (palette.style.display==='block' ? 'none' : 'block');
    });
    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && palette.style.display==='block'){ palette.style.display='none'; }
    });
    buildIcons();
  </script>
</body>
</html>
